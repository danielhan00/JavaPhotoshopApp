package filtertests;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

import java.awt.Color;
import model.filter.kernelfilter.Sharpen;
import model.image.IImage;
import model.image.programmatic.Checkerboard;
import org.junit.Test;

/**
 * Test class for filter class Sharpen.
 */
public class SharpenTest {

  Sharpen sharpen = new Sharpen();

  IImage redGreenCheckerboard = new Checkerboard(
      50, 4, Color.RED, Color.GREEN);

  double[][] kernel = {
      {-1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0},
      {-1.0 / 8.0, 1.0 / 4.0, 1.0 / 4.0, 1.0 / 4.0, -1.0 / 8.0},
      {-1.0 / 8.0, 1.0 / 4.0, 1.0, 1.0 / 4.0, -1.0 / 8.0},
      {-1.0 / 8.0, 1.0 / 4.0, 1.0 / 4.0, 1.0 / 4.0, -1.0 / 8.0},
      {-1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0}
  };

  double[][] illegalKernel = {
      {-1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0, -1.0 / 8.0},
      {-1.0 / 8.0, 1.0 / 4.0, 1.0 / 4.0, 1.0 / 4.0, -1.0 / 8.0},
      {-1.0 / 8.0, 1.0 / 4.0, 1.0, 1.0 / 4.0, -1.0 / 8.0},
      {-1.0 / 8.0, 1.0 / 4.0, 1.0 / 4.0, 1.0 / 4.0, -1.0 / 8.0},
  };

  // null picture given - invalid.
  @Test(expected = IllegalArgumentException.class)
  public void testInvalidPicture() {
    sharpen.apply(null);
  }

  // valid and invalid kernels testing.
  @Test
  public void testIllegalKernel() {
    assertFalse(sharpen.validKernel(illegalKernel));
    assertTrue(sharpen.validKernel(kernel));
  }

  // invalid kernel throws an exception.
  @Test(expected = IllegalArgumentException.class)
  public void testInvalidKernelApplyKernel() {
    sharpen.applyKernel(illegalKernel, redGreenCheckerboard);
  }

  // test apply kernel - valid.
  @Test
  public void testApplyKernel() {
    assertEquals(255,
        sharpen.applyKernel(kernel, redGreenCheckerboard).getPixelAt(0, 0).getRed());
    assertEquals(0,
        sharpen.applyKernel(kernel, redGreenCheckerboard).getPixelAt(0, 0).getGreen());
    assertEquals(0,
        sharpen.applyKernel(kernel, redGreenCheckerboard).getPixelAt(0, 0).getBlue());
  }

  @Test
  public void testApply() {
    IImage sharpenRedGreenCheckerboard = sharpen.apply(redGreenCheckerboard);
    assertEquals(255,
        sharpen.apply(redGreenCheckerboard).getPixelAt(0, 0).getRed());
    assertEquals(0,
        sharpen.apply(redGreenCheckerboard).getPixelAt(0, 0).getGreen());
    assertEquals(0,
        sharpen.apply(redGreenCheckerboard).getPixelAt(0, 0).getBlue());
  }
}
